# USE CASE 1 — Авторизация администратора
*Источник: use case.pdf* :contentReference[oaicite:0]{index=0}

**Предусловия:**
- Администратор открыл веб-панель AdminWatch.
- Система доступна и отвечает.

**Основной поток:**
1. Администратор вводит логин и пароль.
2. Система проверяет комбинацию логин/пароль в базе данных.
3. Если учётная запись существует, система запрашивает код 2FA.
4. Администратор вводит код подтверждения.
5. Система проверяет корректность кода.
6. Администратор переходит на главную страницу приложения.

**Альтернативные потоки:**
- (2а) Неверный пароль → система сообщает об ошибке → админ повторяет ввод.
- (4а) Неверный код 2FA → повторный ввод.
- (1а) Аккаунт заблокирован → система запрещает вход, выводит инструкцию по восстановлению.

**Результат:**  
Администратор успешно авторизован в системе.

---

# USE CASE 2 — Просмотр логов действий администраторов

**Предусловия:**
- Администратор авторизован.

**Основной поток:**
1. Администратор открывает раздел “Логи”.
2. Система загружает последние события.
3. Отображается таблица: время, пользователь, тип события, важность.
4. Администратор просматривает список.

**Альтернативные потоки:**
- (2а) Логи недоступны из-за ошибки базы → показывается сообщение.
- (3а) Логов нет → показывается пустой список.

**Результат:**  
Администратор увидел историю действий в системе.

---

# USE CASE 3 — Фильтрация логов по событиям

**Предусловия:**
- Отображён список логов.

**Основной поток:**
1. Администратор выбирает один или несколько фильтров:
   - диапазон дат  
   - тип события  
   - пользователь  
   - уровень критичности
2. Нажимает “Применить”.
3. Система перезагружает данные с учётом фильтров.
4. Отображается отфильтрованный список.

**Альтернативные потоки:**
- (3а) По фильтрам нет результатов → отображается предупреждение.
- (1а) Выбраны несовместимые фильтры → система уведомляет.

**Результат:**  
Администратор получил нужный набор логов.

---

# USE CASE 4 — Просмотр подробной информации о событии

**Предусловия:**
- Список логов загружен.

**Основной поток:**
1. Администратор нажимает на конкретную запись.
2. Система открывает детальную карточку события.
3. Отображается:
   - полное описание  
   - параметры запроса  
   - IP-адрес  
   - User-Agent  
   - роль пользователя  
   - JSON-данные backend события  
4. Администратор возвращается назад.

**Альтернативные потоки:**
- (2а) Событие удалено → система не может показать детали.
- (2б) Ошибка загрузки → показывается предупреждение.

**Результат:**  
Администратор получил полную информацию по событию.

---

# USE CASE 5 — Создание роли в системе

**Предусловия:**
- У администратора есть разрешение “Управление ролями”.

**Основной поток:**
1. Администратор открывает раздел “Роли”.
2. Нажимает “Создать роль”.
3. Вводит название роли.
4. Отмечает галочками доступные разрешения:
   - управление пользователями  
   - просмотр логов  
   - настройка уведомлений  
   - изменение ролей  
   - и др.
5. Нажимает “Сохранить”.
6. Новая роль появляется в списке.

**Альтернативные потоки:**
- (4а) Не выбрано ни одного разрешения → система выводит предупреждение.
- (3а) Название роли занято → ошибка, предложить другое имя.

**Результат:**  
Создана новая роль с заданным набором прав.

---

# USE CASE 6 — Назначение роли пользователю

**Предусловия:**
- Существует хотя бы один пользователь.
- Существует хотя бы одна роль.

**Основной поток:**
1. Админ открывает страницу пользователя.
2. Нажимает “Назначить роль”.
3. Выбирает роль из списка.
4. Подтверждает действие.
5. Система обновляет профиль пользователя.

**Альтернативные потоки:**
- (3а) Роль уже назначена → система предлагает выбрать другую.
- (4а) У администратора нет прав → отказ.

**Результат:**  
Пользователю назначена роль.

---

# USE CASE 7 — Настройка уведомлений о критических событиях

**Предусловия:**
- Администратор имеет права на изменение настроек.

**Основной поток:**
1. Админ открывает раздел “Уведомления”.
2. Выбирает типы событий, которые должны вызывать уведомления:
   - Неуспешная авторизация  
   - Бан IP  
   - Изменение ролей  
   - Попытки доступа к запрещённым ресурсам
3. Выбирает способ доставки:
   - Telegram  
   - Email
4. Нажимает “Сохранить”.

**Альтернативные потоки:**
- (3а) Telegram не подключён → система предлагает пройти интеграцию.
- (4а) Ошибка сохранения → повторить.

**Результат:**  
Настройки уведомлений обновлены.

---

# USE CASE 8 — Получение уведомления о критическом событии

**Предусловия:**
- В системе произошло событие, удовлетворяющее правилам уведомлений.

**Основной поток:**
1. Backend фиксирует событие.
2. Система проверяет настройки уведомлений.
3. Отправляет сообщение администратору.
4. Админ открывает уведомление и переходит к подробной информации.
5. Просматривает карточку события.

**Альтернативные потоки:**
- (3а) Канал доставки недоступен → система делает повторные попытки.

**Результат:**  
Администратор оперативно получил уведомление.

---

# USE CASE 9 — Экспорт логов

**Предусловия:**
- Пользователь находится на странице логов.

**Основной поток:**
1. Админ нажимает “Экспорт”.
2. Выбирает формат: CSV / JSON / PDF.
3. Задаёт период.
4. Система формирует файл.
5. Пользователь скачивает файл на устройство.

**Альтернативные потоки:**
- (4а) Слишком большой диапазон → система предлагает архивировать.
- (4б) Истёк таймаут → предложить уменьшить период.

**Результат:**  
Файл логов успешно экспортирован.

---

# USE CASE 10 — Просмотр статистики активности администраторов

**Предусловия:**
- В системе накоплены данные логов.

**Основной поток:**
1. Админ открывает “Статистика”.
2. Выбирает тип отчёта:
   - Активность по дням  
   - Активность по ролям  
   - Ошибки
3. Система строит графики.
4. Админ изучает графические отчёты.

**Альтернативные потоки:**
- (2а) Данных недостаточно для графиков → показывается уведомление.

**Результат:**  
Администратор получил статистическую информацию.

---

# USE CASE 11 — Поиск событий по ключевым словам

**Предусловия:**
- В системе есть логи.

**Основной поток:**
1. Админ вводит строку поиска: “ошибка”, “IP 192…” и т.п.
2. Система ищет по полям логов:
   - Тип события  
   - JSON  
   - IP  
   - User-Agent
3. Отображает совпадения.

**Альтернативные потоки:**
- (3а) Нет совпадений → показывается уведомление.

**Результат:**  
Найдены и отображены все подходящие события.

---

# USE CASE 12 — Машинное выявление подозрительной активности

**Предусловия:**
- Машинное обучение/правила корреляции активны.

**Основной поток:**
1. Система обнаруживает аномалию (частые попытки входа, необычные IP).
2. Добавляет событие в категорию “Подозрительные”.
3. Отправляет уведомление администратору.
4. Админ открывает событие.
5. Рассматривает рекомендации:
   - заблокировать IP  
   - изменить пароль пользователя  
   - назначить расследование

**Альтернативные потоки:**
- (1а) Данные недостаточны → событие помечается как “требует проверки”.
- (3а) Канал уведомлений не активен → событие только добавляется в журнал.

**Результат:**  
Подозрительное событие обнаружено и обработано.

---

# ГРУППА 1: Базовые функции безопасности и доступа (низкая–средняя сложность)

Эти UC связаны с авторизацией, правами, базовым управлением системой.

**№ Use Case**
- 1 Авторизация администратора  
- 5 Создание роли  
- 6 Назначение роли пользователю  
- 7 Настройка уведомлений  

**Семантика:**  
Управление доступом и конфигурацией системы.

**Сложность:**  
Низкая или средняя — CRUD + настройки.

---

# ГРУППА 2: Работа с логами и аналитикой (средняя сложность)

Эти UC объединяет функциональность логирования, поиска, анализа и отображения данных.

**№ Use Case**
- 2 Просмотр логов  
- 3 Фильтрация логов  
- 4 Просмотр подробностей события  
- 11 Поиск событий по ключевым словам  

**Семантика:**  
Операции с логами и данными событий.

**Сложность:**  
Средняя — работа с данными, фильтрацией, запросами.

---

# ГРУППА 3: Автоматизация, уведомления и аналитика высокого уровня (высокая сложность)

Сюда идут UC, где система активно взаимодействует с внешними сервисами, делает сложные вычисления и генерирует данные.

**№ Use Case**
- 8 Получение уведомления (push, external integration)  
- 9 Экспорт логов  
- 10 Просмотр статистики активности  
- 12 Машинное выявление подозрительной активности  

**Семантика:**  
Автоматическая обработка событий, интеграции, аналитика, ML/анализ аномалий.

**Сложность:**  
Наиболее высокая — генерация отчётов, работа с большими данными, ML-логика.
